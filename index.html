<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Todo</title>
</head>
<body>
  <!--

  [ ]. organize features using MoSCoW [ðŸŸ©ï¸ ðŸŸ¨ï¸ ðŸŸ§ï¸ ]
  [ ]. read tasks
    [x]. read tasks from database and put in the DOM
    [ ]. ðŸŸ§ï¸ sort tasks alphabeticallay
  [ ]. add task
    [ ]. add form validation
      [ ]. ðŸŸ©ï¸no empty input
      [ ]. ðŸŸ©ï¸no spaces
      [ ]. ðŸŸ§ï¸no repeated values
  [ ]. delete task
      [ ]. remove from the DOM
      [ ]. remove from the database
  [ ]. mark task as done


 -->
  <h1>Todo List</h1>
  <form action="">
    <input type="text" id="task-input">
    <input type="submit" value="Add task" id="submit">
  </form>

  <!-- create a ul list pour mettre tous les li dedans -->
  <ul id="tasks">
    <!-- <li></li> -->
  </ul>
  <script>
    // read database, on reÃ§oit un string (JSON.string) du coup faut faire parse pour recup l Array normal
    let tasks =  JSON.parse(localStorage.getItem("tasks"));
    tasks.forEach((task) => {
      const itemElement = document.createElement("li");
      itemElement.innerHTML = task;
      document.getElementById("tasks").appendChild(itemElement);
    })


    // we have list of items and we want to do something to every item
    document.querySelectorAll('img').forEach(element => {
      element.alt =  'blank';
    });


    //  we want to insert something into the DOM
    // create element if it doesn't exist and insert item
    document.createElement('div').innerHTML = 'blabla'
    // select element if it exists and insert item
    document.getElementById('tasks').innerHTML = 'blabla'

    // simple string
    .innerText
    .append

    // more complicate html
    .innerHTML
    .insertAjdacentHTML

    // for html nodes only
    .appendChild


    // for one item
    // const liElement = document.createElement("li");
    // liElement.innerHTML = tasks[0];
    // console.log(liElement)
    // document.getElementById("tasks").appendChild(liElement);
    // select form
    const form = document.querySelector("form");
    form.addEventListener("submit", (e) => {
      e.preventDefault();
      console.log(e)
      // select input text
      const taskInput = document.getElementById("task-input").value;
      // verifier si input est vide
      if (taskInput) {
        console.log("condition")
        const li = document.createElement("li");
        li.innerText = taskInput;
        // recup ul to append a child
        const tasksElement = document.getElementById("tasks");
        tasksElement.appendChild(li);
        // create an empty list
        const taskList = [];
        // iteract with li
        document.querySelectorAll("li").forEach((item) => {
          taskList.push(item.innerHTML);
        });
        // add to local storage, update aussi
        localStorage.setItem("tasks", JSON.stringify(taskList));
        // localStorage.setItem("tasks", ["cook", "compras", "lavar roupas"]);
      }

    })
  </script>


</body>
</html>
