<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Todo</title>
</head>
<body>
  <!--

  [ ]. organize features using MoSCoW [ðŸŸ©ï¸ ðŸŸ¨ï¸ ðŸŸ§ï¸ ]
  [ ]. read tasks
    [x]. read tasks from database and put in the DOM
    [ ]. ðŸŸ§ï¸ sort tasks alphabeticallay
  [ ]. add task
    [ ]. add form validation
      [ ]. ðŸŸ©ï¸no empty input
      [ ]. ðŸŸ©ï¸no spaces
      [ ]. ðŸŸ§ï¸no repeated values
  [ ]. delete task
      [ ]. ðŸŸ©ï¸remove from the DOM
      [ ]. ðŸŸ©ï¸remove from the database
  [ ]. mark task as done
 -->
  <h1>Todo List</h1>
  <form action="">
    <input type="text" id="task-input">
    <input type="submit" value="Add task" id="submit">
  </form>

  <!-- create a ul list pour mettre tous les li dedans -->
  <ul id="tasks">
    <!-- <li></li> -->
  </ul>
  <script>
    // read database, on reÃ§oit un string (JSON.string) du coup faut faire parse pour recup l Array normal
    let tasks =  JSON.parse(localStorage.getItem("tasks"));
    tasks.forEach((task) => {
      const itemElement = document.createElement("li");
      itemElement.innerHTML = task;
      document.getElementById("tasks").appendChild(itemElement);
    })

    const form = document.querySelector("form");
    form.addEventListener("submit", (e) => {
      e.preventDefault();
      console.log(e)
      // select input text
      const taskInput = document.getElementById("task-input").value;
      // verifier si input est vide
      if (taskInput.trim() !== "") {
        const li = document.createElement("li");
        li.innerText = taskInput;
        // recup ul to append a child
        const tasksElement = document.getElementById("tasks");
        tasksElement.appendChild(li);
        // iteract with li
        document.querySelectorAll("li").forEach((item) => {
          tasks.push(item.innerHTML);
        });
        // add to local storage, update aussi
        localStorage.setItem("tasks", JSON.stringify(taskList));
        // localStorage.setItem("tasks", ["cook", "compras", "lavar roupas"]);
      }
    })
  </script>
</body>
</html>
